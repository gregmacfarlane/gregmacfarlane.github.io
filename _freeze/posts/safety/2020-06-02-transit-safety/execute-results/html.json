{
  "hash": "6dea8d4e9a4bb2ed9270b905918b9d9d",
  "result": {
    "markdown": "---\ntitle: Transit Safety\nauthor: Gregory Macfarlane\ndate: '2020-06-02'\nslug: transit-safety\ncategories: []\ntags: []\n---\n\n\n\n\nI came across this graphic from an [APTA Factbook](https://www.apta.com/wp-content/uploads/Resources/resources/statistics/Documents/FactBook/APTA_2011_Fact_Book.pdf)(p. 20) which shows transit with an enormous safety advantage over automobiles. I was curious if I could update the data using information from the Bureau of Transportation Statistics.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::include_graphics(\"https://i.imgur.com/7txj1aA.png\")\n```\n\n::: {.cell-output-display}\n![](https://i.imgur.com/7txj1aA.png)\n:::\n:::\n\n\n## Passenger Miles\n\nFirst, we want to get passenger miles traveled by different modes. The BTS has this data in an Excel spreadsheet at <https://www.bts.gov/content/us-passenger-miles>. The data in the spreadsheet is somewhat spotty, and there are *plenty* of footnotes describing the fact that the sources of the different elements have changed over the years. But let's go with just data from 2000 onward.\n\n> I wanted to read the Excel files directly from the BTS website, but there was just too much cleaning that needed to be done to make them machine-readable in a nice way. You can find the lightly modified spreadsheet I used, including a separate analysis from this one, [here](passmiles.xlsx)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# get Excel file from BTS\npassmiles <- read_excel(here(\"posts/safety/passmiles.xlsx\"), \n                        skip = 1, sheet = \"passenger_miles\") %>%\n  filter(!is.na(Mode)) %>%\n  select(Group, Mode, `2000`:`2018`) %>%\n  pivot_longer(cols = `2000`:`2018`, names_to = \"year\", values_to = \"passmiles\", \n               names_transform = list(year = as.integer)) %>%\n  # convert from million miles to miles\n  mutate( passmiles = passmiles * 1e6 ) %>%\n  distinct() \n```\n:::\n\n\nThe numbers in the data table are given in Millions. To keep our units straight, we are going to use straight miles for now.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(passmiles, aes(x = year, y = passmiles, label = Mode, color = Mode, \n                      group = str_c(Group, Mode))) +\n  geom_path() + facet_wrap(~Group, scales = \"free_y\") + \n  geom_dl(method = list(dl.trans(x = x + 0.2), \"last.points\", cex = 0.6)) +\n  geom_dl(method = list(dl.trans(x = x - 0.2), \"first.points\", cex = 0.6))  +\n  scale_x_continuous(limits = c(1995, 2022)) +\n  scale_color_discrete(guide = \"none\") +\n  ylab(\"Passenger Miles\") + xlab(\"Year\") +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](2020-06-02-transit-safety_files/figure-html/passmiles-plot-1.png){width=672}\n:::\n:::\n\n\n## Fatalities by Mode\n\nThe BTS also publishes statistics on fatality broken up by mode at: <https://www.bts.gov/content/transportation-fatalities-modea>. However, there are a number of potential issues arising from these data. First, transit fatalities are grouped by workers and vehicle occupants, but are not separated by mode. Additionally, there are a number of redundant categories.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfatalities <- read_excel(here(\"posts/safety/passmiles.xlsx\"), \n                        sheet = \"fatalities\") %>%\n  filter(!is.na(Mode)) %>%\n  select(Group, Mode, `2000`:`2018`) %>%\n  pivot_longer(cols = `2000`:`2018`, names_to = \"year\", values_to = \"fatalities\", \n               names_transform = list(year = as.integer))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(fatalities %>% filter(Group %in% c(\"Air\", \"Highway\", \"Rail\", \"Transit\")),\n       aes(x = year, y = fatalities, label = Mode, color = Mode,  \n           group = str_c(Group, Mode))) +\n  geom_path() + facet_wrap(~Group, scales = \"free_y\") + \n  geom_dl(method = list(dl.trans(x = x + 0.2), \"last.points\", cex = 0.6)) +\n  geom_dl(method = list(dl.trans(x = x - 0.2), \"first.points\", cex = 0.6))  +\n  scale_x_continuous(limits = c(1995, 2022)) +\n  scale_color_discrete(guide = \"none\") +\n  ylab(\"Fatalities\") + xlab(\"Year\") +\n  theme_bw()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 6 rows containing missing values (`geom_path()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 6 rows containing missing values (`geom_dl()`).\nRemoved 6 rows containing missing values (`geom_dl()`).\n```\n:::\n\n::: {.cell-output-display}\n![](2020-06-02-transit-safety_files/figure-html/fatalities-plot-1.png){width=672}\n:::\n:::\n\n\n## Fatalities per 100 Million Miles\n\nBecause the two report tables use different modal definitions, we will consider only group-levels with the following pairs:\n\n-   Air: all fatalities and passenger miles\n-   Highway: all fatalities and passenger miles, minus bus fatalities and miles\n-   Transit: fatalities and passenger miles by rail and non-rail\n-   Rail: Only Intercity rail miles; passenger rail fatalities minus transit rail fatalities.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmiles_summary <- passmiles %>% \n  # remove bus miles from highway group\n  filter(!(Group == \"Highway\" & Mode == \"Bus\")) %>%\n  # only keep intercity rail\n  filter(!(Group == \"Rail\" %in% c(\"Light Rail\", \"Heavy Rail\", \"Commuter Rail\", \"All\"))) %>%\n  # remove summary miles from all other groups\n  filter(!(Group == \"Transit\" & Mode == \"All\")) %>%\n  filter(!(Group == \"Highway\" & Mode == \"All\")) %>%\n  # simplify transit modes into rail and non-rail\n  mutate(\n    Mode = case_when(\n      Group == \"Transit\" & Mode %in% c(\"Light Rail\", \"Heavy Rail\", \"Commuter Rail\") ~ \"Rail\",\n      Group == \"Transit\" ~ \"Non-Rail\",\n      Group == \"Highway\" ~ \"All\",\n      Group == \"Rail\" ~ \"All\",\n      Group == \"Air\" ~ \"All\",\n      TRUE ~ Mode\n    )\n  ) %>%\n  group_by(Group, Mode, year) %>%\n  summarise(passmiles = sum(passmiles))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'Group', 'Mode'. You can override using the\n`.groups` argument.\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfatalities_summary <- fatalities %>%\n  mutate(\n    keep = case_when(\n      # all air\n      Group == \"Air\" & Mode == \"All\" ~ T,\n      # all highway but bus\n      Group == \"Highway\" & !(Mode %in% c(\"All\", \"Bus\")) ~ T,\n      # transit rail  and non-rail\n      Group == \"Transit\" & Mode %in% c(\"Non-Rail\", \"Rail\") ~ T,\n      # passenger rail\n      Group == \"Rail\" & Mode == \"All\" ~ T,\n      TRUE ~ F\n    ),\n    Mode = ifelse(Group == \"Highway\", \"All\", Mode), \n  ) %>% filter(keep) %>%\n  group_by(Group, Mode, year) %>%\n  summarise(fatalities = sum(fatalities))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'Group', 'Mode'. You can override using the\n`.groups` argument.\n```\n:::\n\n```{.r .cell-code}\n# remove transit rail fatalities from rail \ntransit_rail_fatalities <- fatalities_summary %>% filter(Mode == \"Rail\") %>% pull(fatalities)\n  \nfatalities_summary <- fatalities_summary %>%\n  mutate(\n    transit_rail_fatalities = transit_rail_fatalities,\n    fatalities = ifelse(Group == \"Rail\", fatalities - transit_rail_fatalities, fatalities)\n  )\n```\n:::\n\n\nFinally, we can join the two datasets together, and compute the fatalities per 100 million miles.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfatal_rate <- left_join(miles_summary, fatalities_summary, \n                        by = c(\"Group\", \"Mode\", \"year\")) %>%\n  mutate(\n    fatal_rate = fatalities / (passmiles / 1e8) # fatalities per 100 million miles\n  )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(fatal_rate, aes(\n  x = year, y = fatal_rate, \n  color = str_c(Group, Mode, sep = \" \"), \n  label = str_c(Group, Mode, sep = \" \"), \n  )) +\n  geom_path() +\n  geom_dl(method = list(dl.trans(x = x + 0.2), \"last.points\", cex = 0.6)) +\n  geom_dl(method = list(dl.trans(x = x - 0.2), \"first.points\", cex = 0.6))  +\n  scale_x_continuous(limits = c(1999, 2019)) +\n  scale_color_discrete(guide = \"none\") +\n  ylab(\"Fatalities per 100 Million Passenger Miles\") + \n  xlab(\"Year\") + \n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](2020-06-02-transit-safety_files/figure-html/fatal-rate-plot-1.png){width=672}\n:::\n:::\n\n\nFrom my understanding, if a light rail train hits a pedestrian, it counts as a highway fatality *and* a transit fatality. Given that a large number of the rail fatalities are due to trespassers and at-grade crossings, this may overstate the safety to rail *passengers*. Also, it double-counts fatalities resulting from a commuter rail train colliding with a private automobile.\n\nMy thoughts on the APTA chart:\n\n-   I believe they used Vehicle Miles Traveled (VMT) instead of passenger miles traveled. Because the average occupancy of a vehicle is somewhat over 1.0, this overstates the relative danger of highway modes.\n-   I believe they considered only fatalities among *transit passengers* resulting from *train crashes*, and did not include fatalities among transit workers or other users killed by trains. I believe they did, however, include all highway fatalities, and not simply vehicle occupants. You could make the argument that this is the correct comparison, but I don't believe that it is fair.\n",
    "supporting": [
      "2020-06-02-transit-safety_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}